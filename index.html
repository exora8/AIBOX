<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A1-OA17X</title>
    <style>
        /* Google Font for a modern look */
        @import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap');

        :root {
            --bg-color: #000000;
            --primary-card-color: #0a0a0a;
            --text-color: #f0f0f0;
            --label-color: #999;
            --accent-color: #ffffff;
            --glow-color: #ffffff;
        }

        body {
            font-family: 'Roboto Mono', monospace;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: var(--bg-color);
            color: var(--text-color);
            overflow: hidden;
            filter: grayscale(100%);
            position: relative;
            background-image:
                linear-gradient(rgba(255,255,255,0.07) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255,255,255,0.07) 1px, transparent 1px);
            background-size: 35px 35px;
            animation: moveGrid 20s linear infinite;
        }
        
        body::after {
            content: " ";
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: linear-gradient(0deg, rgba(0,0,0,0) 50%, rgba(255,255,255,0.05) 50%);
            background-size: 100% 4px;
            animation: scanlines 40s linear infinite;
            pointer-events: none;
            opacity: 0.5;
        }

        /* --- NEW: Exora Quant Logo Intro Animation --- */
        #logo-intro-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--bg-color);
            z-index: 9999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            /* Animation to fade out the entire overlay */
            animation: fade-out-overlay 0.5s ease-in 3.5s forwards;
        }

        .logo-scene {
            perspective: 1000px;
            margin-bottom: 2rem;
        }

        .cube {
            width: 80px;
            height: 80px;
            position: relative;
            transform-style: preserve-3d;
            animation: spin-cube 4s ease-in-out forwards;
        }

        .face {
            position: absolute;
            width: 80px;
            height: 80px;
            border: 1px solid rgba(255, 255, 255, 0.5);
            background: rgba(10, 10, 10, 0.5); /* Semi-transparent faces */
            box-shadow: 0 0 25px rgba(255, 255, 255, 0.1) inset;
        }

        /* Correctly position each face of the cube */
        .front  { transform: rotateY(0deg) translateZ(40px); }
        .back   { transform: rotateY(180deg) translateZ(40px); }
        .right  { transform: rotateY(90deg) translateZ(40px); }
        .left   { transform: rotateY(-90deg) translateZ(40px); }
        .top    { transform: rotateX(90deg) translateZ(40px); }
        .bottom { transform: rotateX(-90deg) translateZ(40px); }
        
        .logo-text {
            font-size: 2.5rem;
            color: var(--text-color);
            letter-spacing: 8px;
            text-transform: uppercase;
            text-shadow: 0 0 10px var(--glow-color);
            opacity: 0;
            /* Animation to fade in the text */
            animation: fade-in-text 1.5s ease-out 1s forwards;
        }

        @keyframes spin-cube {
            0% { transform: rotateX(-20deg) rotateY(-20deg) scale(0.5); }
            50% { transform: rotateX(180deg) rotateY(180deg) scale(1); }
            100% { transform: rotateX(340deg) rotateY(340deg) scale(0.8); }
        }

        @keyframes fade-in-text {
            to { opacity: 1; }
        }

        @keyframes fade-out-overlay {
            from { opacity: 1; }
            to { opacity: 0; pointer-events: none; }
        }
        /* --- End of New Intro Animation Styles --- */


        /* Container for 3D perspective */
        .scene-3d {
            perspective: 1500px; /* Increased perspective for better 3D effect */
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .monitor {
            background-color: var(--primary-card-color);
            width: 350px;
            padding: 2.5rem;
            border-radius: 15px;
            border: 1px solid #2a2a2a;
            transform-style: preserve-3d;
            box-shadow: 0 25px 60px rgba(0, 0, 0, 0.5);
            /* MODIFIED: Delays added to start after the new logo intro */
            animation: 
                intro-fly-in 2.5s cubic-bezier(0.23, 1, 0.32, 1) 3.5s forwards,
                float 8s ease-in-out 16.5s forwards, 
                border-glow 4s ease-in-out infinite 6.5s;
        }

        h1 {
            color: var(--accent-color);
            text-align: center;
            margin-bottom: 2rem;
            letter-spacing: 5px;
            text-transform: uppercase;
            font-size: 2.2rem;
            position: relative;
            overflow: hidden; /* Required for the shimmer effect */
            text-shadow: 0 0 8px var(--glow-color);
        }
        
        h1::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.8), transparent);
            transform: translateX(-110%);
            /* MODIFIED: Delay added to start after the new logo intro */
            animation: text-shimmer 4s ease-in-out infinite 6.5s;
        }

        .data-point { margin: 1.5rem 0; font-size: 1.1rem; display: flex; justify-content: space-between; align-items: center; }
        .label { color: var(--label-color); font-weight: bold; }
        .value { font-weight: 700; transition: color 0.3s ease; }
        .value.updated { animation: highlight 0.5s ease-out; }
        #battery-container.charging #battery_level { color: var(--glow-color); animation: pulse 1.5s infinite; }
        #battery-container.charging .charging-icon { display: inline; color: var(--glow-color); margin-right: 8px; }
        .charging-icon { display: none; }
        .temp-gauge { width: 100%; height: 10px; background-color: #333; border-radius: 5px; overflow: hidden; margin-top: 8px; }
        .temp-bar { height: 100%; width: 0; border-radius: 5px; background: linear-gradient(90deg, #333, #666, #999, #ccc); background-size: 400%; background-position: 0% 50%; transition: background-position 0.5s ease, width 0.5s ease; }
        .footer { text-align: center; margin-top: 2rem; color: var(--label-color); font-size: 0.8rem; }

        /* --- Keyframe Animations --- */
        @keyframes intro-fly-in {
            0% {
                opacity: 0;
                transform: translateZ(-1500px) rotateY(90deg) rotateX(20deg);
            }
            100% {
                opacity: 1;
                transform: translateZ(0) rotateY(-10deg) rotateX(5deg);
            }
        }
        
        @keyframes text-shimmer {
        }

        @keyframes pulse { 0% { text-shadow: 0 0 3px var(--glow-color); } 50% { text-shadow: 0 0 10px var(--glow-color); } 100% { text-shadow: 0 0 3px var(--glow-color); } }
        @keyframes highlight { 0% { background-color: rgba(255, 255, 255, 0.2); } 100% { background-color: transparent; } }
        @keyframes float { 0% { transform: rotateY(-10deg) rotateX(5deg) translateZ(0); } 50% { transform: rotateY(5deg) rotateX(-5deg) translateZ(20px) translateY(-5px); } 100% { transform: rotateY(-10deg) rotateX(5deg) translateZ(0); } }
        @keyframes scanlines { 0% { background-position: 0 0; } 100% { background-position: 0 100vh; } }
        @keyframes flicker { 0%, 19.9%, 22%, 62.9%, 64%, 64.9%, 70%, 100% { opacity: 0.99; } 20%, 21.9%, 63%, 63.9%, 65%, 69.9% { opacity: 0.8; } }
        @keyframes moveGrid { from { background-position: 0 0; } to { background-position: -35px -35px; } }
        @keyframes border-glow { 0% { box-shadow: 0 25px 60px rgba(0, 0, 0, 0.5), 0 0 10px rgba(255, 255, 255, 0.05) inset; } 50% { box-shadow: 0 25px 60px rgba(0, 0, 0, 0.5), 0 0 20px rgba(255, 255, 255, 0.1) inset, 0 0 15px rgba(255, 255, 255, 0.2); } 100% { box-shadow: 0 25px 60px rgba(0, 0, 0, 0.5), 0 0 10px rgba(255, 255, 255, 0.05) inset; } }
        
    </style>
</head>
<body>
    
    <!-- NEW: Logo Intro Overlay -->
    <div id="logo-intro-overlay">
        <div class="logo-scene">
            <div class="cube">
                <div class="face front"></div>
                <div class="face back"></div>
                <div class="face right"></div>
                <div class="face left"></div>
                <div class="face top"></div>
                <div class="face bottom"></div>
            </div>
        </div>
        <div class="logo-text">Exora Quant</div>
    </div>

    <div class="scene-3d">
        <div class="monitor">
            <h1>A1-OA17X</h1>
            <div id="data-container">
                <div class="data-point"> <span class="label">Timestamp:</span> <span class="value" id="timestamp"></span> </div>
                <div class="data-point" id="battery-container"> <span class="label">Battery:</span> <span class="value" id="battery_level"></span> </div>
                <div class="data-point"> <span class="label">Status:</span> <span class="value" id="status"></span> </div>
                <div class="data-point" style="flex-direction: column; align-items: flex-start;">
                    <div style="width: 100%; display: flex; justify-content: space-between;"> <span class="label">Temperature:</span> <span class="value" id="temperature_celsius"></span> </div>
                    <div class="temp-gauge"> <div id="temp-bar" class="temp-bar"></div> </div>
                </div>
            </div>
            <div class="footer"> <span>Real-time data | Refreshes every second</span> </div>
        </div>
    </div>

    <script>
        const url = 'https://raw.githubusercontent.com/exora8/AIBOX/refs/heads/main/device.json';

        // Element references
        const timestampEl = document.getElementById('timestamp');
        const batteryLevelEl = document.getElementById('battery_level');
        const batteryContainerEl = document.getElementById('battery-container');
        const statusEl = document.getElementById('status');
        const tempCelsiusEl = document.getElementById('temperature_celsius');
        const tempBarEl = document.getElementById('temp-bar');
        const allValueEls = document.querySelectorAll('.value');
        let isFirstLoad = true;

        // --- Text Scramble Effect Class ---
        class TextScramble {
            constructor(el) { this.el = el; this.chars = '!<>-_\\/[]{}—=+*^?#________'; this.update = this.update.bind(this); }
            setText(newText) { const oldText = this.el.innerText; const length = Math.max(oldText.length, newText.length); const promise = new Promise((resolve) => this.resolve = resolve); this.queue = []; for (let i = 0; i < length; i++) { const from = oldText[i] || ''; const to = newText[i] || ''; const start = Math.floor(Math.random() * 40); const end = start + Math.floor(Math.random() * 40); this.queue.push({ from, to, start, end }); } cancelAnimationFrame(this.frameRequest); this.frame = 0; this.update(); return promise; }
            update() { let output = ''; let complete = 0; for (let i = 0, n = this.queue.length; i < n; i++) { let { from, to, start, end, char } = this.queue[i]; if (this.frame >= end) { complete++; output += to; } else if (this.frame >= start) { if (!char || Math.random() < 0.28) { char = this.randomChar(); this.queue[i].char = char; } output += `<span class="scrambling">${char}</span>`; } else { output += from; } } this.el.innerHTML = output; if (complete === this.queue.length) { this.resolve(); } else { this.frameRequest = requestAnimationFrame(this.update); this.frame++; } }
            randomChar() { return this.chars[Math.floor(Math.random() * this.chars.length)]; }
        }

        // Initialize scramblers for each value element
        const scramblers = {
            timestamp: new TextScramble(timestampEl),
            status: new TextScramble(statusEl),
            battery_level: new TextScramble(batteryLevelEl),
            temperature_celsius: new TextScramble(tempCelsiusEl)
        };

        function fetchData() {
            fetch(url + '?t=' + new Date().getTime()) // Cache-busting
                .then(response => response.ok ? response.json() : Promise.reject(response.statusText))
                .then(data => {
                    if (isFirstLoad) {
                        scramblers.timestamp.setText(data.timestamp);
                        scramblers.status.setText(data.status);
                        scramblers.battery_level.setText(`⚡ ${data.battery_level} %`);
                        scramblers.temperature_celsius.setText(`${data.temperature_celsius.toFixed(1)} °C`);
                        isFirstLoad = false;
                    } else {
                        updateText(timestampEl, data.timestamp);
                        updateText(statusEl, data.status);
                        updateText(batteryLevelEl, `<span class="charging-icon">⚡</span> ${data.battery_level} %`);
                        updateText(tempCelsiusEl, `${data.temperature_celsius.toFixed(1)} °C`);
                    }
                    
                    batteryContainerEl.classList.toggle('charging', data.status === "CHARGING");
                    updateTemperatureGauge(data.temperature_celsius);
                })
                .catch(error => {
                    console.error('Fetch error:', error);
                    allValueEls.forEach(el => el.textContent = 'Error');
                    tempBarEl.style.width = '0%';
                });
        }
        
        function updateText(element, newContent) {
            if (element.innerHTML !== newContent) {
                element.innerHTML = newContent;
                element.classList.add('updated');
                setTimeout(() => element.classList.remove('updated'), 500);
            }
        }
        
        function updateTemperatureGauge(temp) {
            const tempPercent = Math.max(0, Math.min(100, (temp / 80) * 100)); // Assume 0-80°C range
            tempBarEl.style.width = `${tempPercent}%`;
            tempBarEl.style.backgroundPosition = `${tempPercent}% 50%`;
        }
        
        // Start fetching data after all intro animations complete
        document.addEventListener('DOMContentLoaded', () => {
            // MODIFIED: Timeout increased to account for new 4s logo intro + 2.5s monitor intro
            setTimeout(() => {
                fetchData(); // Fetch initial data
                setInterval(fetchData, 1000); // Start refreshing every second
            }, 6000); // Total delay: 3.5s (overlay fades) + 2.5s (monitor flies in) = 6s
        });
    </script>

</body>
</html>
